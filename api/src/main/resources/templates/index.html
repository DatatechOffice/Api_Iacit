<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8"/>
    <title>IACT_Datatech</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <meta content="" name="keywords"/>
    <meta content="" name="description"/>

    <link href="img/favicon.ico" rel="icon" />
    <link rel="preconnect" href="https://fonts.googleapis.com"/>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;500;600;700&display=swap"
    rel="stylesheet"/>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet"/>
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet"/>
    <link href="lib/tempusdominus/css/tempusdominus-bootstrap-4.min.css" rel="stylesheet"/>
    <link href="css/bootstrap.min.css" rel="stylesheet"/>
    <link href="css/style.css" rel="stylesheet"/>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" rossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous">
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous">
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js">
    </script>
  </head>

  <body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">Menu</a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarTogglerDemo02"
          aria-controls="navbarTogglerDemo02"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarTogglerDemo02">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link" aria-current="page" href="#filtros">Filtro</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#tabela">Tabela</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#relatorio">Relatorio</a>
            </li>
          </ul>
          <form class="d-flex" role="search">
            <input
              class="form-control me-2"
              type="search"
              placeholder="Search"
              aria-label="Search"
            />
            <button class="btn btn-outline-success" type="submit">
              Search
            </button>
          </form>
        </div>
      </div>
    </nav>

<table class="table table-striped" cellspacing="0" cellpadding="0">
   <thead>
       <tr>
       <th scope="col">est_codigo</th>
       <th scope="col">est_nome_estacao</th>
       <th scope="col">tem_id</th>
       <th scope="col">tem_ar_bulbo_seco</th>
       <th scope="col">tem_max</th>
       <th scope="col">tem_min</th>
       <th scope="col">tem_data_hora</th>
       </tr>
   </thead>
   <tbody>
       <tr th:each="temp : ${teste_Temperatura}">
           <td>[[${temp.est_codigo}]]</td>
           <td>[[${temp.est_nome_estacao}]]</td>
           <td>[[${temp.tem_id}]]</td>
           <td>[[${temp.tem_ar_bulbo_seco}]]</td>
           <td>[[${temp.tem_max}]]</td>
           <td>[[${temp.tem_min}]]</td>
           <td>[[${temp.tem_data_hora}]]</td>

       </tr>
   </tbody>
</table>
    

    <!-- <form>
    <div>
      <label for="diaa">Data de inicio:</label>
      <input type="date" id="diaa" name="diaa">
    </div>
    <button id="btnEnviarDados" class="btn btn-outline-success" type="submit">Buscar data</button>
  </form> -->

    <!--  <div class="mb-3">
    <h2 for="dataAgendada" style="text-align:left;padding-left:4px" class="form-label form-ticketfilho">Horário
      previsto:</h2>
    <input class="form-control form-control-lg"
      style="font-size: 18px;border-left: none;border-top: none;border-right: none;form-label-color: #5A5A5A;form-text-color: #5A5A5A;"
      type="datetime-local" name="Data" id="dataAcordada" size="30" placeholder="Informe a data"
      min="2022/09/15T09:08:54.566Z">
  </div> -->

    <div class="container-xxl position-relative bg-white d-flex">
      <!-- Content Start -->
      <div class="content">
        <div id="filtros" class="container-fluid pt-4 px-4">
          <h4 class="mb-0">Selecione o período:</h4>

          <form>
            <div>
              <label for="diaa">Data inicio:</label>
              <input type="date" id="dataInicio" name="diaa" />
            </div>
          </form>

          <br>

          <!--  <div class="mb-3">
          <h2 for="dataAgendada" style="text-align:left;padding-left:4px" class="form-label form-ticketfilho">Data
            Inicio:</h2>
          <input class="form-control form-control-lg"
            style="font-size: 18px;border-left: none;border-top: none;border-right: none;form-label-color: #5A5A5A;form-text-color: #5A5A5A;"
            type="datetime-local" name="Data" id="dataInicio" size="30" placeholder="Informe a data"
            min="2022/09/15T09:08:54.566Z">
        </div> -->

          <form>
            <div>
              <label for="diaa">Data Fim :</label>
              <input type="date" id="dataFim" name="diaa" />
            </div>
          </form>

          <br>
          <!-- <div class="mb-3">
          <h2 for="dataAgendada" style="text-align:left;padding-left:4px" class="form-label form-ticketfilho">Data
            Final:</h2>
          <input class="form-control form-control-lg"
            style="font-size: 18px;border-left: none;border-top: none;border-right: none;form-label-color: #5A5A5A;form-text-color: #5A5A5A;"
            type="datetime-local" name="Data2" id="dataFim" size="30" placeholder="Informe a data"
            min="2022/09/15T09:08:54.566Z">
        </div> -->

          <button id="btnEnviarDados" class="btn btn-outline-success" type="submit">
            Buscar data
          </button>

          <!-- <div class="row">
          <div class="col-sm-12 col-md-6 col-xl-4">
            <div class="h-100 bg-light rounded p-4">
              <div class="d-flex align-items-center justify-content-between mb-4">
                <h6 class="mb-0">Calender</h6>
              </div>
              <div id="calender"></div>
            </div>
          </div>
          <div class="col-sm-12 col-md-6 col-xl-4">
            <div class="h-100 bg-light rounded p-4">
              <div class="d-flex align-items-center justify-content-between mb-4">
                <h6 class="mb-0">Calender</h6>
              </div>
              <div id="calender2"></div>
            </div>
          </div>
        </div> -->
        </div>

        <br /><br /><br />

        <div class="row align-items-start">
          <div class="form-check col">
            <input
              class="form-check-input"
              type="checkbox"
              value=" "
              id="tempBulboSeco"
            />
            <label class="form-check-label" for="flexCheckDefault">
              Temp Bulbo Seco
            </label>
          </div>
          <div class="form-check col">
            <input
              class="form-check-input"
              type="checkbox"
              value=" "
              id="tempTempMax"
            />
            <label class="form-check-label" for="flexCheckDefault">
              Temp Max
            </label>
          </div>
          <div class="form-check col">
            <input
              class="form-check-input"
              type="checkbox"
              value=" "
              id="tempTempMax"
            />
            <label class="form-check-label" for="flexCheckDefault">
              Temp Min
            </label>
          </div>
        </div>

        <br /><br /><br />

        <div class="container mt-3">
          <h2>Relatorio</h2>
        </div>

        <table id="tabela" class="table table-striped">
          <thead>
            <tr>
              <th scope="col">First</th>
              <th scope="col">Last</th>
              <th scope="col">Handle</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Mark</td>
              <td>Otto</td>
              <td>@mdo</td>
            </tr>
            <tr>
              <td>Jacob</td>
              <td>Thornton</td>
              <td>@fat</td>
            </tr>
            <tr>
              <td>Jacob</td>
              <td>Thornton</td>
              <td>@fat</td>
            </tr>
          </tbody>
        </table>

        <div id="relatorio"></div>

        <script
          type="text/javascript"
          src="https://www.gstatic.com/charts/loader.js"
        ></script>

        <div
          id="columnchart_values"
          style="width: 900px; height: 900px; align-items: center"
        ></div>
      </div>
      <!-- Back to Top -->
      <a href="#" class="btn btn-lg btn-primary btn-lg-square back-to-top"
        ><i class="bi bi-arrow-up"></i
      ></a>
    </div>

    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="lib/chart/chart.min.js"></script>
    <script src="lib/easing/easing.min.js"></script>
    <script src="lib/waypoints/waypoints.min.js"></script>
    <script src="lib/owlcarousel/owl.carousel.min.js"></script>
    <script src="lib/tempusdominus/js/moment.min.js"></script>
    <script src="lib/tempusdominus/js/moment-timezone.min.js"></script>
    <script src="lib/tempusdominus/js/tempusdominus-bootstrap-4.min.js"></script>

    <!-- Template Javascript -->
    <script src="js/main.js"></script>


    <center>
      <h3>Charts using Google Sheet Data</h3>
      <button class="btn btn-outline-success" 
          onclick="plotcharts()">
          Plot Charts
      </button>
  </center>
  <div class="row" style="width:100%">
      <div class="col-md-6">
          <canvas id="barchart"></canvas>
      </div>
      <div class="col-md-6">
          <canvas id="linechart"></canvas>
      </div>
  </div>

  </body>

  <script type="text/javascript">
    function plotcharts(){
        var apiUrl = 'https://sheetdb.io/api/v1/smarsr6psjmu9';
        var months=[]
        var cost=[];
        var selling=[];
        fetch(apiUrl).then(response => {
            return response.json();
        }).then(data => {
            for(let i =0; i <data.length;i++){
                months.push(data[i]['Data']);
                cost.push(parseInt(data[i]['TEMPERATURA MÁXIMA NA HORA ANT. (AUT) (°C)']));
                selling.push(parseInt(data[i]['TEMPERATURA MÍNIMA NA HORA ANT. (AUT) (°C)']));
            }
            //For Bar chart
            dataset=addData('TEMPERATURA MÁXIMA NA HORA ANT. (AUT) (°C)', cost, 'green', 'black');
            drawchart(dataset, months, 'bar');
              
            //For Line chart
            dataset=addData('TEMPERATURA MÍNIMA NA HORA ANT. (AUT) (°C)', selling, 'transparent', 'green');
            drawchart(dataset, months, 'line');
              
        }).catch(err => {
            console.log(err);
        });
    }
  
    function addData(title, Data, bgcolor, bordercolor){
        return [{
            label: title,
            data: Data,
            backgroundColor: bgcolor,
            borderColor: bordercolor,
            borderWidth: 1.5
        }];
    }
      
    function drawchart(dataset, Labels, type){
        const ctx = document.getElementById(type+'chart').getContext('2d');
        const myChart = new Chart(ctx, {
            type: type,
            data: {
                labels: Labels,
                datasets: dataset
            },
            options: {
                scales: {
                    yAxes: [{
                        ticks: {
                            beginAtZero: true
                        }
                    }]
                }
            }
        });
    }
</script>

</html>